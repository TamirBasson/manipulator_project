<?xml version="1.0"?>
<robot name="manipulator_robot" xmlns:xacro="http://www.ros.org/wiki/xacro">

      <!-- Define custom colors for visualization -->
    <material name="blue">
        <color rgba="0.2 0.2 1 0.7"/>
    </material>
    <material name="black">
        <color rgba="0 0 0 0.95"/>
    </material>
    <material name="red">
        <color rgba="1 0 0 0.95"/>
    </material>

    <material name="silver">
        <color rgba="0.9 0.9 0.98 1.0"/>
    </material>

    <!-- Fixed link 'world' to represent a fixed world frame -->
    <link name="world"/>

    <!-- 
      Joint 1: Revolute (world -> base_link)
      Limits: -180° to 180° (i.e., -π to π)
    -->
    <joint name="world_to_base_joint" type="revolute">
        <parent link="world"/>
        <child link="base_link"/>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <axis xyz="0 0 1"/>
        <limit lower="${-pi}" upper="${pi}" effort="10" velocity="1.0"/>
    </joint>

    <!-- Base link -->
    <link name="base_link">
        <inertial>
            <origin xyz="0 0 0.25" rpy="0 0 0"/>
            <mass value="1.0"/>
            <!-- Inertia tensor calculations for a solid cylinder aligned along the Z-axis:
             Ixx = Iyy = (1/12) * m * (3*r^2 + h^2)
             Izz = (1/2) * m * r^2 
             
            Where:
             m = 1.0 (mass of the cylinder)
             r = 0.1 (radius of the cylinder)
             h = 0.45 (length/height of the cylinder)

             Substituting values:
             Ixx = Iyy = (1/12) * 1.0 * (3 * 0.1^2 + 0.45^2) = 0.0174375
             Izz = (1/2) * 1.0 * 0.1^2 = 0.005
             -->
        <inertia 
                    ixx="0.0174375" 
                    ixy="0.0" 
                    ixz="0.0" 
                    iyy="0.0174375" 
                    iyz="0.0" 
                    izz="0.005"/>
        </inertial>
        <visual>
            <origin xyz="0 0 0.25" rpy="0 0 0"/>
            <geometry>
                <cylinder length="0.5" radius="0.1"/>
            </geometry>
            <material name="silver"/>
        </visual>
        <collision>
            <origin xyz="0 0 0.25" rpy="0 0 0"/>
            <geometry>
                <cylinder length="0.5" radius="0.1"/>
            </geometry>
        </collision>
        <!-- added sphere just for visualization purposes, didn't add collision for this one -->
        <visual> 
            <material name="silver"/>
            <origin xyz="0 0 0.5" rpy="0 0 0"/>
            <geometry>
                <sphere radius="0.1"/>
            </geometry>
        </visual> 
    </link>

    <!-- 
      Joint 2: Revolute (base_link -> link1)
      Limits: -90° to 90° (-π/2 to π/2)
    -->
    <joint name="base_link_to_link1_joint" type="revolute">
        <parent link="base_link"/>
        <child link="link1"/>
        <origin xyz="0 0 0.55" rpy="0 0 0"/>
        <axis xyz="0 1 0"/>
        <limit lower="${-pi / 2.0}" upper="${pi / 2.0}" effort="10" velocity="1.0"/>
    </joint>

    <!-- Link1 -->
    <link name="link1">
        <inertial>
            <origin xyz="0 0 0.2" rpy="0 0 0"/>
            <mass value="0.5"/>
            <inertia ixx="0.0067167" 
                    ixy="0.0" 
                    ixz="0.0" 
                    iyy="0.0067167" 
                    iyz="0.0" 
                    izz="0.0002"/>
        </inertial>
        
        <visual>
            <origin xyz="0 0 0.2" rpy="0 0 0"/>
            <geometry>
                <cylinder length="0.4" radius="0.02"/>
            </geometry>
            <material name="silver"/>
        </visual>

        <collision>
            <origin xyz="0 0 0.2" rpy="0 0 0"/>
            <geometry>
                <cylinder length="0.32" radius="0.02"/>
            </geometry>
        </collision>
        <!-- Added collision geometry matching the visual geometry -->
    </link>

    <link name="end_effector">
    <visual>
        <geometry>
        <sphere radius="0.03"/>  <!-- Visual representation -->
        </geometry>
        <material name="red"/>
    </visual>
    <collision>
        <geometry>
        <sphere radius="0.03"/>  <!-- Collision geometry -->
        </geometry>
    </collision>
    </link>


    <joint name="line1_to_end_effector_join" type="fixed">
    <parent link="link1"/>
    <child link="end_effector"/>
    <origin xyz="0 0 0.4" rpy="0 0 0"/>
    </joint>

</robot>
